"use strict";function query(e){return document.querySelector(e)}let formData={palette:"",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};const fr=new FileReader,uploadBtn=query(".js__profile-trigger"),fileField=query(".js__profile-upload-btn"),profileImage=query(".js__profile-image"),profilePreview=query(".js__profile-preview"),localImage=localStorage.getItem("photo");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,formData.photo=fr.result,localStorage.setItem("photo",formData.photo)}function fakeFileClick(){fileField.click()}localImage&&(profileImage.style.backgroundImage=`url(${localImage})`,profilePreview.style.backgroundImage=`url(${localImage})`,formData.photo=localImage),uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const accordionTitles=document.querySelectorAll(".js-accordion-title"),accordionContents=document.querySelectorAll(".js-accordion-content"),accordionIcons=document.querySelectorAll(".js-accordion-icon");function removeClass(e,t){e.classList.remove(t)}accordionTitles.forEach(e=>{e.addEventListener("click",()=>{accordionTitles.forEach(e=>removeClass(e,"js-accordion-title-active")),accordionContents.forEach(e=>removeClass(e,"js-accordion-content-open")),accordionIcons.forEach(e=>removeClass(e,"fa-rotate-180"));const t=e.nextElementSibling;e.classList.toggle("js-accordion-title-active");const r=e.lastElementChild;e.classList.contains("js-accordion-title-active")?(r.classList.add("fa-rotate-180"),t.classList.add("js-accordion-content-open")):(r.classList.remove("fa-rotate-180"),t.classList.remove("js-accordion-content-open"))})});const borderPV=query(".js-border"),namePV=query(".js-name"),iconPV=query(".js-icon"),framePV=query(".js-frame"),photoPV=query(".js-photo"),coldSelector=query(".cold"),warmSelector=query(".warm"),mediumSelector=query(".medium"),paletteCold=query("#cold"),paletteWarm=query("#warm"),paletteMedium=query("#medium");function changeToCold(){borderPV.classList.add("border-cold"),borderPV.classList.remove("border-warm","border-medium"),namePV.classList.add("name-cold"),namePV.classList.remove("name-warm","name-medium"),iconPV.classList.add("icon-cold"),iconPV.classList.remove("icon-warm","icon-medium"),framePV.classList.add("js-frame-cold"),framePV.classList.remove("js-frame-warm","js-frame-medium"),photoPV.classList.add("photo-cold"),photoPV.classList.remove("photo-warm","photo-medium","js-photo-default"),formData.palette="1",localStorage.setItem("color",JSON.stringify(formData.palette))}function changeToWarm(){borderPV.classList.add("border-warm"),borderPV.classList.remove("border-cold","border-medium"),namePV.classList.add("name-warm"),namePV.classList.remove("name-cold","name-medium"),iconPV.classList.add("icon-warm"),iconPV.classList.remove("icon-cold","icon-medium"),framePV.classList.add("js-frame-warm"),framePV.classList.remove("js-frame-cold","js-frame-medium"),photoPV.classList.add("photo-warm"),photoPV.classList.remove("photo-cold","photo-medium","js-photo-default"),formData.palette="2",localStorage.setItem("color",JSON.stringify(formData.palette))}function changeToMedium(){borderPV.classList.add("border-medium"),borderPV.classList.remove("border-cold","border-warm"),namePV.classList.add("name-medium"),namePV.classList.remove("name-cold","name-warm"),iconPV.classList.add("icon-medium"),iconPV.classList.remove("icon-cold","icon-warm"),framePV.classList.add("js-frame-medium"),framePV.classList.remove("js-frame-cold","js-frame-warm"),photoPV.classList.add("photo-medium"),photoPV.classList.remove("photo-cold","photo-warm","js-photo-default"),formData.palette="3",localStorage.setItem("color",JSON.stringify(formData.palette))}coldSelector.addEventListener("change",changeToCold),warmSelector.addEventListener("change",changeToWarm),mediumSelector.addEventListener("change",changeToMedium);const frameSwitcher=query(".js-frame-button"),frameHidden=query(".js-frame-hidden");function switchFrame(){frameHidden.classList.toggle("js-frame-hidden"),frameSwitcher.classList.toggle("js-frame-button-off"),frameSwitcher.classList.toggle("js-frame-button-active"),frameSwitcher.classList.contains("js-frame-button-active")&&localStorage.setItem("frame","active"),frameSwitcher.classList.contains("js-frame-button-off")&&localStorage.removeItem("frame")}function resetFrame(){frameHidden.classList.add("js-frame-hidden"),frameSwitcher.classList.add("js-frame-button-off"),frameSwitcher.classList.remove("js-frame-button-active")}frameSwitcher.addEventListener("click",switchFrame);const userName=query(".js-inputName"),userJob=query(".js-inputJob"),userEmail=query(".js-inputEmail"),userPhone=query(".js-inputPhone"),userLinkedin=query(".js-inputLinkedin"),userGithub=query(".js-inputGithub"),renderUserName=query(".js-name"),renderUserJob=query(".js-jobPreview"),renderUserEmail=query(".js-emailPreview"),renderUserPhone=query(".js-phonePreview"),renderUserLinkedin=query(".js-linkedinPreview"),renderUserGithub=query(".js-githubPreview"),userData={},getFromLocalStorage=()=>{const e=localStorage.getItem("data"),t=localStorage.getItem("color"),r=JSON.parse(e),a=JSON.parse(t),s=localStorage.getItem("frame");null!==r&&(localStorageForm(r),renderUserInfo(r)),null!==a&&localStorageColor(a),null!==s&&(frameHidden.classList.remove("js-frame-hidden"),frameSwitcher.classList.remove("js-frame-button-off"),frameSwitcher.classList.add("js-frame-button-active"))};function getInputValues(){userData.name=userName.value,userData.job=userJob.value,userData.email=userEmail.value,userData.phone=userPhone.value,userData.linkedin=userLinkedin.value,userData.github=userGithub.value}function renderUserInfo(e){renderUserName.innerHTML=e.name,renderUserJob.innerHTML=e.job,renderUserEmail.href="mailto:"+e.email,renderUserPhone.href="tel:"+e.phone,renderUserLinkedin.href="https://linkedin.com/in/"+e.linkedin,renderUserGithub.href="https://github.com/"+e.github,""===renderUserName.innerHTML&&(renderUserName.innerHTML="Jeanne Baret"),""===renderUserJob.innerHTML&&(renderUserJob.innerHTML="Bot√°nica")}function updateInputHandler(){getInputValues(),renderUserInfo(userData),localStorage.setItem("data",JSON.stringify(userData))}function localStorageForm(e){userName.value=e.name,userJob.value=e.job,userEmail.value=e.email,userPhone.value=e.phone,userLinkedin.value=e.linkedin,userGithub.value=e.github}function localStorageColor(e){"1"===e&&(changeToCold(),paletteCold.setAttribute("checked","")),"2"===e&&(changeToWarm(),paletteWarm.setAttribute("checked","")),"3"===e&&(changeToMedium(),paletteMedium.setAttribute("checked",""))}getFromLocalStorage(),userName.addEventListener("keyup",updateInputHandler),userJob.addEventListener("keyup",updateInputHandler),userEmail.addEventListener("keyup",updateInputHandler),userPhone.addEventListener("keyup",updateInputHandler),userLinkedin.addEventListener("keyup",updateInputHandler),userGithub.addEventListener("keyup",updateInputHandler);const username=query("#name"),userjob=query("#job"),useremail=query("#email"),userphone=query("#phone"),userlinkedin=query("#linkedin"),usergithub=query("#github");function validationUserName(){""===username.value?(username.classList.add("js-border-input"),username.parentElement.classList.add("js-error")):(username.classList.remove("js-border-input"),username.parentElement.classList.remove("js-error"))}function validationJob(){""===userjob.value?(userjob.classList.add("js-border-input"),userjob.parentElement.classList.add("js-error")):(userjob.classList.remove("js-border-input"),userjob.parentElement.classList.remove("js-error"))}function validationEmail(){""!==useremail.value&&validateEmail(useremail.value)?(useremail.classList.remove("js-border-input"),useremail.parentElement.classList.remove("js-error"),renderUserEmail.classList.remove("js-icon-deactivated")):(
//!useremail.value.includes('@')
useremail.classList.add("js-border-input"),useremail.parentElement.classList.add("js-error"),renderUserEmail.classList.add("js-icon-deactivated"))}function validationPhone(){""!==userphone.value&&validatePhone(userphone.value)?(userphone.classList.remove("js-border-input"),userphone.parentElement.classList.remove("js-error"),renderUserPhone.classList.remove("js-icon-deactivated")):(userphone.classList.add("js-border-input"),userphone.parentElement.classList.add("js-error"),renderUserPhone.classList.add("js-icon-deactivated"))}function validationLinkedin(){""===userlinkedin.value?(userlinkedin.classList.add("js-border-input"),userlinkedin.parentElement.classList.add("js-error"),renderUserLinkedin.classList.add("js-icon-deactivated")):(userlinkedin.classList.remove("js-border-input"),userlinkedin.parentElement.classList.remove("js-error"),renderUserLinkedin.classList.remove("js-icon-deactivated"))}function validationGithub(){""===usergithub.value?(usergithub.classList.add("js-border-input"),usergithub.parentElement.classList.add("js-error"),renderUserGithub.classList.add("js-icon-deactivated")):(usergithub.classList.remove("js-border-input"),usergithub.parentElement.classList.remove("js-error"),renderUserGithub.classList.remove("js-icon-deactivated"))}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function validatePhone(e){return/^([9,7,6]{1})+([0-9]{8})$/.test(e)}username.addEventListener("keyup",validationUserName),userjob.addEventListener("keyup",validationJob),useremail.addEventListener("keyup",validationEmail),userphone.addEventListener("keyup",validationPhone),userlinkedin.addEventListener("keyup",validationLinkedin),usergithub.addEventListener("keyup",validationGithub);const shareClick=document.querySelector(".form__share");function emptyFieldValidator(){validationUserName(),validationJob(),validationEmail(),validationLinkedin(),validationGithub(),validateEmail()}shareClick.addEventListener("click",emptyFieldValidator);let isValid=!1;const submitButton=query("form .js-button-share"),formInputs=document.querySelectorAll(".js-form .form__fill input"),textError=query(".form__share__text--error"),paletteInputs=document.querySelectorAll(".js-palette");let twitterURL;function changeElement(e){submitButton.hasAttribute("disabled")&&resetTwitter(),validatePalette(),getValuesFromForm(),validateForm(),!0===isValid?(submitButton.removeAttribute("disabled"),textError.classList.add("js-hidden")):(submitButton.setAttribute("disabled",""),textError.classList.remove("js-hidden"))}function getValuesFromForm(){formInputs.forEach(e=>{"file"!==e.type&&(formData[e.name]=e.value)})}function validatePalette(){!0===paletteCold.checked&&(formData.palette=1),!0===paletteWarm.checked&&(formData.palette=2),!0===paletteMedium.checked&&(formData.palette=3)}function validateForm(){isValid=!0,""===formData.phone&&(formData.phone=void 0);for(let e in formData)""===formData[e]&&(isValid=!1);return isValid}formInputs.forEach(e=>{e.addEventListener("change",changeElement)}),paletteInputs.forEach(e=>{e.addEventListener("change",changeElement)}),submitButton.addEventListener("click",(function(e){e.preventDefault();fetch("https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",{method:"POST",body:JSON.stringify(formData),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){showURL(e)})).catch((function(e){console.error(e)}))}));const btn=document.querySelector(".twitterdiv");function showURL(e){const t=document.querySelector(".form__share__text__p");if(e.success){textError.classList.remove("js-hidden"),btn.classList.remove("js-hidden");const r='Echa un vistazo a mi tarjeta de visita, hecha con %23BotanicalProfileCards" üå± ';t.innerHTML=`<span>üå±La tarjeta ha sido creada:</span><a href="${e.cardURL}" target="_blank" >${e.cardURL}</a>`;const a=document.querySelector(".twitter--link");submitButton.setAttribute("disabled",""),a.setAttribute("href",`https://twitter.com/intent/tweet?text=${r}&url=${e.cardURL}&hashtags=Adalabers,JavaScript,PromoJemison,week7of12`)}}changeElement();const createCard=document.querySelector(".form__share__submit");function resetTwitter(){btn.classList.add("js-hidden");document.querySelector(".form__share__text__p").innerHTML='<p class="form__share__text__p">\n            ¬°La tarjeta todav√≠a no est√° lista para ser compartida!\n            <span>Por favor, revisa los campos rellenos m√°s arriba üå± </span>\n          </p>'}createCard.addEventListener("click",showURL);const resetElement=query(".button__reset"),paletteDefault=query("#cold");function reset(e){resetTwitter(),e.preventDefault();for(const e of formInputs)e.value="",profileImage.style="",profilePreview.style="",changeToCold(),paletteDefault.checked=!0,formData.palette=1,renderUserName.innerHTML="Jeanne Baret",renderUserJob.innerHTML="Bot√°nica";resetFrame(),localStorage.removeItem("frame"),localStorage.removeItem("data"),localStorage.removeItem("photo"),localStorage.removeItem("color")}resetElement.addEventListener("click",reset);